webpackJsonp([1,0],[function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var a=s(71),n=i(a),o=s(72),c=i(o),r=s(49),l=i(r),d=s(56),u=i(d),h=s(54),v=i(h),p=s(50),m=i(p),f=s(57),_=i(f),g=s(59),w=i(g),k=s(58),y=i(k),C=s(51),b=i(C),x=s(55),S=i(x),$=s(53),T=i($),A=s(52),L=i(A);n.default.use(c.default);var M=[{path:"/",component:v.default},{path:"/storeDetail/:id",component:y.default},{path:"/storeList/:type",component:w.default},{path:"/storeList/search/noStore",component:_.default},{path:"/storeList/search/:keyword",component:w.default},{path:"/newStore",component:u.default},{path:"/newStore/addSuccess",component:m.default},{path:"/comment/success/:id",component:T.default},{path:"/comment/failed/:id",component:L.default},{path:"/comment/mark/:id/:title/:tags/:comment",component:S.default},{path:"/comment/:id",component:b.default},{path:"/:type",component:v.default}],q=new c.default({routes:M});new n.default({el:"#app",template:"<App/>",components:{App:l.default},router:q,mounted:function(){}})},,,,,,,,,,function(t,e,s){t.exports=s.p+"static/img/avatar.png"},function(t,e,s){t.exports=s.p+"static/img/no.png"},,,,,,,,,,,,,,,,,,,,function(t,e,s){t.exports=s.p+"static/img/comment_top.png"},function(t,e,s){t.exports=s.p+"static/img/xingxing.png"},function(t,e,s){t.exports=s.p+"static/img/bad.png"},function(t,e,s){t.exports=s.p+"static/img/good.png"},function(t,e,s){t.exports=s.p+"static/img/normal.png"},function(t,e,s){t.exports=s.p+"static/img/header.png"},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,s){s(44);var i=s(2)(s(75),s(67),null,null);t.exports=i.exports},function(t,e,s){s(41);var i=s(2)(s(76),s(64),"data-v-4834b120",null);t.exports=i.exports},function(t,e,s){s(46);var i=s(2)(s(77),s(69),"data-v-834e30fe",null);t.exports=i.exports},function(t,e,s){s(38);var i=s(2)(s(78),s(61),"data-v-06c7de9e",null);t.exports=i.exports},function(t,e,s){s(45);var i=s(2)(s(79),s(68),"data-v-744d03f2",null);t.exports=i.exports},function(t,e,s){s(47);var i=s(2)(s(80),s(70),null,null);t.exports=i.exports},function(t,e,s){s(39);var i=s(2)(s(81),s(62),null,null);t.exports=i.exports},function(t,e,s){s(42);var i=s(2)(s(82),s(65),"data-v-56f6d06f",null);t.exports=i.exports},function(t,e,s){s(37);var i=s(2)(s(83),s(60),"data-v-035fdc42",null);t.exports=i.exports},function(t,e,s){s(43);var i=s(2)(s(84),s(66),"data-v-585eb998",null);t.exports=i.exports},function(t,e,s){s(40);var i=s(2)(s(85),s(63),"data-v-2557f87e",null);t.exports=i.exports},function(t,e,s){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-failed-root",class:{show:t.loaded}},[i("img",{attrs:{src:s(11)},on:{load:t.loadPlus}}),t._v(" "),i("h1",[t._v("没有找到相应的店铺信息哦～")]),t._v(" "),i("p",[t._v("到添加新店里提醒我们吧！")]),t._v(" "),i("button",{on:{click:t.newStore}},[t._v("添加新店")])])},staticRenderFns:[]}},function(t,e,s){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-failed-root",class:{show:t.loaded}},[i("img",{attrs:{src:s(11)},on:{load:t.loadPlus}}),t._v(" "),i("h1",[t._v("你已经评价过该店铺了")]),t._v(" "),i("p",[t._v("试着评价其他的页面吧！")]),t._v(" "),i("button",{on:{click:t.newStore}},[t._v("返回")])])},staticRenderFns:[]}},function(t,e,s){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mark-root",class:{show:t.loaded}},[i("div",{staticClass:"alert",class:{show:t.alertShow}},[i("p",[t._v(t._s(t.alertValue))])]),t._v(" "),i("div",{staticClass:"mark-header"},[i("router-link",{attrs:{to:"/"}},[i("span")]),t._v(" "),i("span",[t._v(t._s(t.$route.params.title))])],1),t._v(" "),i("div",{staticClass:"mark-body"},[i("div",{staticClass:"img"},[i("img",{staticClass:"bad",style:{display:t.score<=5?"block":"none"},attrs:{src:s(33)}}),t._v(" "),i("img",{staticClass:"normal",style:{display:t.score>5&&t.score<=7?"block":"none"},attrs:{src:s(35)}}),t._v(" "),i("img",{staticClass:"good",style:{display:t.score>7?"block":"none"},attrs:{src:s(34)}})]),t._v(" "),i("div",{staticClass:"switcher"},[i("h2",[t._v(t._s(t.score)+"分")]),t._v(" "),i("div",{on:{touchstart:t.touchstart,touchmove:t.touchmove,touchend:t.touchend}},[i("span",[t._v("0 ")]),t._v(" "),i("div",{staticClass:"bar"},[i("div",[i("div",{staticClass:"button",style:{transform:"translateX("+t.offset+"px)"}})])]),t._v(" "),i("span",[t._v("10")])])])]),t._v(" "),i("div",{staticClass:"mark-footer"},[i("div",{staticClass:"buttons"},[i("button",{on:{click:function(e){t.$router.push("storeDetail/"+t.$route.params.title)}}},[t._v("暂不评价")]),t._v(" "),i("button",{on:{click:t.submit}},[t._v("完成")])])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"store-list-root",class:{show:t.loaded}},[s("div",{staticClass:"store-list-header"},[s("router-link",{staticClass:"store-list-return",attrs:{to:"/noAnim"}},[s("span")]),t._v(" "),s("h1",[t._v(t._s(t.title))]),t._v(" "),s("div",{staticClass:"tip"}),t._v(" "),s("div",{staticClass:"search",class:{active:t.isSearchActive},on:{click:t.searchActive}},[s("button",{on:{click:t.search}},[t._v("搜索")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text",placeholder:"输入搜索内容"},domProps:{value:t._s(t.keyword)},on:{click:t.inputClick,input:function(e){e.target.composing||(t.keyword=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"menu",class:{active:t.isMenuActive},on:{click:t.menuActive}},[s("button",{on:{blur:t.menuActive}},[t._v("菜单")]),t._v(" "),s("ul",{staticClass:"menu"},[s("li",[s("button",{on:{click:t.sort1}},[t._v("综合排序")])]),t._v(" "),s("li"),t._v(" "),s("li",[s("button",{on:{click:t.sort2}},[t._v("高分排序")])]),t._v(" "),s("li"),t._v(" "),s("li",[s("button",{on:{click:t.sort3}},[t._v("低分排序")])])])])],1),t._v(" "),s("div",{staticClass:"store-list-body"},[s("ul",t._l(t.data,function(e){return s("li",{on:{click:function(s){t.$router.push("/storeDetail/"+e.id)}}},[s("div",{staticClass:"title-container"},[s("h2",[t._v(t._s(e.name))]),t._v(" "),s("span",[t._v(t._s(t.convertToFloat(e.score)))])]),t._v(" "),s("ul",{staticClass:"tags"},t._l(e.tags,function(e){return s("li",[t._v(t._s(e[0]))])})),t._v(" "),s("ul",{staticClass:"pic"},t._l(e.picURLs,function(t){return s("li",[s("img",{attrs:{src:t}})])}))])}))]),t._v(" "),s("div",{staticClass:"store-list-footer"},[s("router-link",{attrs:{to:"/newStore"}},[s("span"),t._v("添加新店")])],1)])},staticRenderFns:[]}},function(t,e,s){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-success-root",class:{show:t.loaded}},[i("img",{attrs:{src:s(10)},on:{load:t.loadPlus}}),t._v(" "),i("h1",[t._v("感谢您提供的数据")]),t._v(" "),i("p",[t._v("您添加的新店将在审核通过后火速上线哦～")]),t._v(" "),i("button",{on:{click:t.back}},[t._v("返回首页")])])},staticRenderFns:[]}},function(t,e,s){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"new-store-root",class:{show:t.loaded}},[i("div",{staticClass:"new-store-header"},[i("div",{staticClass:"new-store-alert"}),t._v(" "),i("img",{attrs:{src:s(36)},on:{load:function(e){t.n++,t.checkLoad()}}}),t._v(" "),t._m(0)]),t._v(" "),i("div",{staticClass:"new-store-input"},t._l(t.items,function(e){return i("div",{staticClass:"input-item",class:e.inputType,attrs:{"data-necessary":e.necessary}},["select"===e.inputType?[i("h2",[i("span",[t._v(t._s(e.title))])]),t._v(" "),i("div",{staticClass:"mask",class:{show:t.inSelection},on:{click:function(e){t.inSelection=!1}}}),t._v(" "),i("div",{staticClass:"select-list",class:{show:t.inSelection}},t._l(e.ops,function(e){return i("button",{staticClass:"select-option",attrs:{"data-id":e.id},on:{click:t.select}},[t._v(t._s(e.name))])})),t._v(" "),i("span",{staticClass:"input",style:{color:""===t.selectValue?"#A9A9A9":"#000"},attrs:{placeholder:e.placeholder},on:{click:t.selectClick}},[t._v(t._s(""===t.selectValue?e.placeholder:t.selectValue))])]:"shortText"===e.inputType?[i("h2",[i("span",[t._v(t._s(e.title))])]),t._v(" "),i("input",{attrs:{placeholder:e.placeholder,id:e.name,type:"text"}})]:"longText"===e.inputType?[i("h2",[i("span",[t._v(t._s(e.title))])]),t._v(" "),i("textarea",{attrs:{placeholder:e.placeholder,id:e.name,type:"text"}})]:t._e()],2)})),t._v(" "),i("button",{staticClass:"submit",on:{click:t.submit}},[t._v("提交")])])},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h1",[s("span"),s("span",[t._v("添加新店")])])}]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"store-detail-root",class:{show:t.loaded}},[s("div",{staticClass:"store-detail-header"},[s("a",{on:{click:function(e){t.$router.go(-1)}}},[s("span",{staticClass:"back"})]),t._v(" "),s("h1",[t._v(t._s(t.detail.name))]),t._v(" "),s("div",{staticClass:"tip"})]),t._v(" "),s("div",{staticClass:"store-detail-body"},[s("div",{staticClass:"body-top",class:{low:t.low&&t.detail.comments.length>=5}},[s("div",{staticClass:"addr-time"},[s("h2",{staticClass:"time"},[s("span",{staticClass:"icon-time"},[t._v("营业时间:")]),t._v(t._s(t.detail.openTime))]),t._v(" "),s("h2",{staticClass:"addr"},[s("span",{staticClass:"icon-addr"},[t._v("地址:")]),t._v(t._s(t.detail.address))]),t._v(" "),s("span",{staticClass:"score"},[t._v(t._s(t.convertToFloat(t.detail.score))+"分")])]),t._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"tags"},t._l(t.detail.tags,function(e){return s("span",[t._v(t._s(e[0]))])})),t._v(" "),s("div",{staticClass:"pics"},[s("div",{staticClass:"img-con"},t._l(t.detail.picURLs_,function(t,e){return s("img",{attrs:{src:t}})})),t._v(" "),t.detail.picURLs.length>3?s("div",{staticClass:"mask"},[t._v("+"+t._s(t.detail.picURLs.length-t.detail.picURLs_.length))]):t._e()])])]),t._v(" "),s("div",{staticClass:"body-bottom"},[s("div",{staticClass:"tabs"},[s("span",{class:{chosen:t.firstChosen},on:{click:function(e){1!=t.firstChosen?t.firstChosen=!t.firstChosen:0}}},[t._v("最热评论")]),t._v(" "),s("span",{class:{chosen:!t.firstChosen},on:{click:function(e){1==t.firstChosen?t.firstChosen=!t.firstChosen:0}}},[t._v("最新评论")])]),t._v(" "),s("ul",{staticClass:"comments-list",attrs:{id:"comments-list"}},t._l(t.detail.comments,function(e){return s("li",[s("div",[s("span",{staticClass:"date"},[t._v(t._s(new Date(1e3*e.date).toLocaleDateString()))]),t._v(" "),s("span",{staticClass:"dislike",class:{black:e.disliked},attrs:{"data-id":e.id},on:{click:function(s){e.disliked?t.disliked=!1:(t.liked=!1,t.disliked=!0),t.changeLikeStatus(t.liked,t.disliked,e)}}},[s("span",[t._v(t._s(e.dislike))])]),t._v(" "),s("span",{staticClass:"like",class:{black:e.liked},attrs:{"data-id":e.id},on:{click:function(s){e.liked?t.liked=!1:(t.disliked=!1,t.liked=!0),t.changeLikeStatus(t.liked,t.disliked,e)}}},[s("span",[t._v(t._s(e.like))])])]),t._v(" "),s("p",[t._v(t._s(e.value))])])}))])]),t._v(" "),s("div",{staticClass:"store-detail-footer"},[s("router-link",{attrs:{to:"/comment/"+t.$route.params.id}},[s("span"),t._v("我要评价")])],1)])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("router-view")},staticRenderFns:[]}},function(t,e,s){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-success-root",class:{show:t.loaded}},[i("img",{attrs:{src:s(10)},on:{load:t.loadPlus}}),t._v(" "),i("h1",[t._v("感谢您的评价")]),t._v(" "),i("p",[t._v("现在大家已经可以看到你的评价了")]),t._v(" "),i("button",{on:{click:t.back}},[t._v("返回")])])},staticRenderFns:[]}},function(t,e,s){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"comment-root",class:{show:t.loaded}},[i("div",{staticClass:"alert",class:{show:t.alertShow}},[i("p",[t._v(t._s(t.alertValue))])]),t._v(" "),i("div",{staticClass:"comment-header"},[i("router-link",{staticClass:"comment-back",attrs:{to:"/"}}),t._v(" "),i("img",{attrs:{src:s(31)},on:{load:function(e){t.n++,t.n>=3?t.loaded=!0:0}}}),t._v(" "),i("div",{staticClass:"comment-float"}),t._v(" "),i("h1",[t._v(t._s(t.data.name))])],1),t._v(" "),i("div",{staticClass:"comment-body"},[i("div",{staticClass:"choose-tags"},[i("div",{staticClass:"width-ruler"}),t._v(" "),i("div",{staticClass:"tags-pre",staticStyle:{display:"block",opacity:"0",position:"absolute","z-index":"-1"}},t._l(t.data.tags,function(e){return i("button",{on:{click:t.select}},[t._v(t._s(e.title))])})),t._v(" "),t.loaded?i("swipe",{attrs:{auto:0,continous:!1}},t._l(t.pages,function(e,s){return i("swipe-item",{staticClass:"tags swiper-slide",style:{width:t.width_+"px"}},[i("div",{staticClass:"button-viewport"},[i("div",{staticClass:"button-wrap",class:{last:s===t.pages.length-1},style:{top:"-"+3.2*s+"rem"}},t._l(t.data.tags,function(e){return i("button",{attrs:{"data-id":e.id},on:{click:t.select}},[t._v(t._s(e.title))])}))])])})):t._e(),t._v(" "),i("div",{staticClass:"dots"})],1),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],attrs:{placeholder:"可选(限200字以内)"},domProps:{value:t._s(t.text)},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"comment-footer"},[i("a",{on:{click:t.next}},[i("span"),t._v("下一步 ")])])])},staticRenderFns:[]}},function(t,e,s){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mainpage-root",class:{show:t.loaded}},[i("div",{staticClass:"mainpage-header"},[i("img",{staticStyle:{display:"none"},attrs:{src:s(32),id:"xingxing"}}),t._v(" "),i("canvas",{attrs:{width:t.canvasWidth,height:t.canvasHeight}}),t._v(" "),i("h1",[t._v("Upick")]),t._v(" "),i("div",{staticClass:"search"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"search-input",attrs:{placeholder:"输入搜索内容"},domProps:{value:t._s(t.keyword)},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),t._v(" "),i("button",{staticClass:"search-button",on:{click:t.searchClick}},[i("span",{staticClass:"search-button-icon"},[t._v("搜索")])])]),t._v(" "),i("div",{staticClass:"topic"},[i("p",[t._v(t._s(t.data.topic))])])]),t._v(" "),i("div",{staticClass:"mainpage-body"},[i("div",{staticClass:"classify"},[i("h2",[t._v("分类")]),t._v(" "),i("div",{staticClass:"column"},t._l(t.data.list1,function(e,s){return i("div",{staticClass:"column-block",on:{click:t.buttonClick}},[i("div",{staticClass:"back"},[i("ul",t._l(e.subTitle,function(e){return i("li",[i("router-link",{attrs:{to:"storeList/"+e}},[t._v(t._s(e))])],1)})),t._v(" "),i("div",{staticClass:"img-div-a",style:{transform:"scale("+5*t.rem/181+")",backgroundPosition:"-"+181*s+"px -205px"}})]),t._v(" "),i("div",{staticClass:"img-div",style:{transform:"scale("+5*t.rem/181+")",backgroundPosition:"-"+181*s+"px 0"}}),t._v(" "),i("h3",[t._v(t._s(e.title))])])}))])]),t._v(" "),i("div",{staticClass:"hot-store"},[i("h2",[t._v("热门商家")]),t._v(" "),i("div",[i("div",{staticClass:"back"}),t._v(" "),i("div",{staticClass:"mainpage-bottom"},t._l(t.data.list2,function(e){return i("router-link",{attrs:{to:"storeDetail/"+e}},[t._v(t._s(e))])}))])])])},staticRenderFns:[]}},,,,,function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app",components:{}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{loaded:!1,n:0}},methods:{back:function(){this.$router.push("/noAnim")},loadPlus:function(){this.n++,2===this.n&&(this.loaded=!0)}},mounted:function(){this.n++}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(86);s(48);var a=s(3);e.default={components:{swipe:i.Swipe,"swipe-item":i.SwipeItem},data:function(){return{data:{name:"",iconURL:"",tags:[]},width_:0,pages:[""],loaded:!1,text:"",n:0,alertShow:"",alertValue:"",alertTimeout:0}},methods:{select:function(t){var e=t.target;e.classList.contains("active")?e.classList.remove("active"):e.classList.add("active")},next:function(){return 0===document.querySelectorAll(".choose-tags button.active").length?void this.alert_("未选择标签！"):""===this.text?void this.alert_("未填写详情！"):void this.$router.push("/comment/mark/"+this.$route.params.id+"/"+this.data.name+"/"+this.getChosenTags()+"/"+this.text)},getChosenTags:function(){for(var t=document.querySelectorAll(".choose-tags button.active"),e=[],s=0;s<t.length;s++)e.push(t[s].dataset.id);return e.join("&")},alert_:function(t){clearTimeout(this.alertTimeout),this.alertValue=t,this.alertShow=!0;var e=this;this.alertTimeout=setTimeout(function(){e.alertShow=!1},2500)}},watch:{pages:function(){}},mounted:function(){var t=this;a.get("commentData.php?id="+t.$route.params.id).then(function(e){e=e.data,t.data=e.data,t.n++,t.width_=document.querySelector("div.width-ruler").clientWidth,t.$forceUpdate(),setTimeout(function(){var e=parseInt(document.querySelector("div.tags-pre").clientHeight/(32*document.querySelector("div.choose-tags").clientHeight/47));document.querySelector("div.tags-pre").style.display="none";for(var s=[],i=0;i<e+1;i++)s.push("");t.pages=s,t.n++,t.n>=3?t.loaded=!0:0},200)}).catch(function(e){console.log(e),e&&alert("加载失败！"),t.loaded=!0})}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{loaded:!1,n:0}},methods:{newStore:function(){this.$router.replace("/comment/"+this.$route.params.id)},loadPlus:function(){this.n++,2===this.n&&(this.loaded=!0)}},mounted:function(){this.n++}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{loaded:!1,n:0}},methods:{back:function(){this.$router.replace("/storeDetail/"+this.$route.params.id)},loadPlus:function(){this.n++,2===this.n&&(this.loaded=!0)}},mounted:function(){this.n++}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,a,n,o=s(3),c=0,r=0,l=["rgba(255,255,255,1)","rgba(96,119,186, 0.7)","rgba(142,211,227, 0.5)"],d=[],u=[],h=0;window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),window.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){window.clearTimeout(t)}}(),e.default={data:function(){return{canvasWidth:document.body.clientWidth,canvasHeight:.45*document.body.clientWidth,data:{topic:"这是头条推文这是头条推文",list1:[],list2:[]},loaded:!1,rem:18,keyword:""}},methods:{searchClick:function(t){var e=t.target.parentNode.querySelector("input"),s=t.target.parentNode.parentNode;""===e.value&&s.classList.contains("active")?s.classList.remove("active"):s.classList.contains("active")?this.$router.push("/storeList/search/"+this.keyword):s.classList.add("active")},buttonClick:function(t){0!=document.querySelectorAll(".active").length&&document.querySelector(".active").classList.remove("active"),t.target.parentNode.classList.add("active")},loop:function(){a.clearRect(0,0,n.width,n.height),a.fillStyle="#343856",a.fillRect(0,0,n.width,n.height);var t=document.getElementById("xingxing");a.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.width*t.height/t.width),c+=2;for(var e=n.width/50,s=0;s<d.length;s++)if(d[s].position.x-d[s].length/Math.SQRT2>n.width||d[s].position.y-d[s].length/Math.SQRT2>n.height)d.splice(s,1),d.push({position:{x:Math.random()*n.width*.75,y:0},color:"",length:.5*Math.random()*r+2*r});else{d[s].position.x+=e/2,d[s].position.y+=e/2;var o=a.createRadialGradient(d[s].position.x,d[s].position.y,1,d[s].position.x,d[s].position.y,1.5*e);o.addColorStop(0,"rgba(255,255,255,0.6)"),o.addColorStop(.2,"rgba(255,223,0,0.18)"),o.addColorStop(1,"rgba(0,0,0,0)"),a.fillStyle=o,a.fillRect(d[s].position.x-e/2,d[s].position.y-e/2,e,e),a.moveTo(d[s].position.x,d[s].position.y),a.lineTo(d[s].position.x-d[s].length/Math.SQRT2,d[s].position.y-d[s].length/Math.SQRT2),a.strokeStyle="rgba(255,255,255,0.2)",a.lineWidth="20px",a.stroke()}for(s=l.length-1;s>=0;s--){a.fillStyle=l[s];var u=(c+90*s)*Math.PI/180,h=Math.sin(u)*r*.7,v=Math.cos(u)*r*.7;a.beginPath(),a.moveTo(0,n.height/3*2+h),a.bezierCurveTo(n.width/2,n.height/3*2+h-r,n.width/2,n.height/3*2+v-r,n.width,n.height/3*2+v),a.lineTo(n.width,n.height),a.lineTo(0,n.height),a.lineTo(0,n.height/3*2+h),a.closePath(),a.fill()}i=requestAnimFrame(this.loop)}},created:function(){},mounted:function(){n=document.querySelector("canvas"),a=document.querySelector("canvas").getContext("2d"),r=.08*n.width,d=[],u=[];for(var t=0;t<2;t++)d.push({position:{x:-10*r+30*Math.random()*r,y:-5*r-Math.random()*r},color:"",length:r/2});for(t=0;t<10;t++)u.push({x:r+10*Math.random()*r,y:r+5*Math.random()*r});window.cancelAnimFrame(i);var e=this;document.getElementById("xingxing").onload=function(){e.loop()},e.rem=parseInt(window.getComputedStyle(document.documentElement).fontSize);var s=new Image,c=new Image,l=new Image;s.src="/static/img/bottom.png",s.onload=function(){h++,h>=4&&(e.loaded=!0)},c.src="/static/img/title.png",c.onload=function(){h++,h>=4&&(e.loaded=!0)},l.src="/static/img/columns.png",l.onload=function(){h++,h>=4&&(e.loaded=!0)},s=c=l=null,o.get("index").then(function(t){t=t.data,e.data=t,h++,h>=4&&(e.loaded=!0)}).catch(function(t){console.log(t),t&&alert("主页加载失败！"),e.loaded=!0})}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=s(12),n=i(a),o=s(3);e.default={data:function(){return{loaded:!1,title:"aaa",score:"0.0",touched:!1,offset:0,rem:0,startX:0,offset_bak:0,alertShow:"",alertValue:"",alertTimeout:0,hasMarked:!1,n:0}},methods:{touchstart:function(t){if(this.hasMarked=!0,this.touched=!0,1===t.touches.length){var e=t.touches[0];this.startX=e.clientX,this.offset=e.clientX-2.5*this.rem,this.offset_bak=e.clientX-2.5*this.rem,this.score=(this.offset/document.querySelector("div.bar").clientWidth*10).toFixed(1)}},touchmove:function(t){if(1===t.touches.length){var e=t.touches[0];this.touched&&(this.offset=this.offset_bak+e.clientX-this.startX,this.offset>=document.querySelector("div.bar").clientWidth?this.offset=document.querySelector("div.bar").clientWidth:this.offset<=0&&(this.offset=0),this.score=(this.offset/document.querySelector("div.bar").clientWidth*10).toFixed(1))}},touchend:function(t){this.touched&&(this.touched=!1)},convertToFloat:function(t){return"number"==typeof t&&(t=t.toString()),3===t.length?t:t+".0"},submit:function(){var t=this;if(!this.hasMarked)return void this.alert_("您未进行评分！");var e={id:this.$route.params.id,title:this.$route.params.title,tags:this.$route.params.tags.split("&"),text:this.$route.params.comment,score:this.score};e=encodeURIComponent((0,n.default)(e)),o.post("comment.php",{data:e}).then(function(e){e=e.data,e.error?e.error.indexOf("commented")?t.$router.push("/comment/failed"+t.$route.params.id):t.alert_("提交失败：服务器拒绝您的数据！"):t.$router.push("/comment/success/"+t.$route.params.id)}).catch(function(e){e&&t.alert_("网络出错！")})},alert_:function(t){clearTimeout(this.alertTimeout),this.alertValue=t,this.alertShow=!0;var e=this;this.alertTimeout=setTimeout(function(){e.alertShow=!1},2500)}},mounted:function(){for(var t=this,e=document.querySelectorAll("img"),s=0;s<e.length;s++)e[s].onload=function(){++t.n>=e.length&&(t.loaded=!0,t.rem=document.querySelector("div.switcher span").clientWidth/1.5)}}}},function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e,s,i){"undefined"==typeof e&&(e=2100),"undefined"==typeof s&&(s="crimson"),"undefined"==typeof i&&(i=function(){}),clearInterval(n),l=e;var a=document.querySelector("div.new-store-alert");a.classList.add("show"),a.style.background=s,a.innerHTML="<p>"+t+"</p>",n=setInterval(function(){if(l-=30,l<=0)return a.classList.remove("show"),a.style.background="transparent",clearInterval(n),i()},30)}Object.defineProperty(e,"__esModule",{value:!0});var n,o,c=s(12),r=i(c),l=0,d=s(3);e.default={data:function(){return{items:o,loaded:!1,n:0,inSelection:!1,selectValue:""}},methods:{submit:function(){for(var t=this,e=[],s=document.querySelectorAll("div.input-item"),i=0;i<s.length;i++)if(s[i].classList.contains("select")){var n=s[i].querySelector("h2>span").innerHTML,o=[],c=document.querySelectorAll("button.select-option.active");if(0===c.length&&"true"==s[i].dataset.necessary)return void a("没有选择"+n);for(var l=0;l<c.length;l++)o.push({id:c[l].dataset.id,name:c[l].innerHTML});e.push({name:n,type:"select",ops:o})}else if(s[i].classList.contains("shortText")){var u=s[i].querySelector("input").value,n=s[i].querySelector("h2>span").innerHTML;if(""===u&&"true"==s[i].dataset.necessary)return void a("没有填写"+n);e.push({name:n,type:"shortText",value:u})}else if(s[i].classList.contains("longText")){var u=s[i].querySelector("textarea").value,n=s[i].querySelector("h2>span").innerHTML;if(""===u&&"true"==s[i].dataset.necessary)return void a("没有填写"+n);e.push({name:n,type:"longText",value:u})}e=encodeURIComponent((0,r.default)(e)),d.post("add_store",{data:e}).then(function(e){e=e.data,e.error?a("提交失败：服务器拒绝您的数据！"):t.$router.push("/newStore/addSuccess")}).catch(function(t){t&&a("网络出错！")})},select:function(t){var e=t.target;document.querySelectorAll("button.select-option.active").length>=1&&document.querySelector("button.select-option.active").classList.remove("active"),e.classList.add("active"),this.selectValue=e.innerHTML,this.inSelection=!1},init:function(){var t=this;d.get("storeFormData.php").then(function(e){e=e.data,t.items=e.data,t.n++,t.checkLoad()}).catch(function(t){console.log(t),t&&a("加载表单失败！")})},checkLoad:function(){2===this.n&&(this.loaded=!0)},selectClick:function(){this.inSelection=!0}},mounted:function(){this.init()}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{loaded:!1,n:0}},methods:{newStore:function(){this.$router.push("/newStore")},loadPlus:function(){this.n++,2===this.n&&(this.loaded=!0)}},mounted:function(){this.n++}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(3);e.default={data:function(){return{loaded:!1,detail:{name:"A",openTime:"",address:"",picURLs:[],picURLs_:[],tags:[],score:"",comments:[]},low:!1,firstChosen:""}},methods:{convertToFloat:function(t){return"number"==typeof t&&(t=t.toString()),3===t.length?t:t+".0"},changeLikeStatus:function(t,e,s){var a=[s.liked,s.disliked];s.liked=t,s.disliked=e,i.get("changeLikeStatus?id="+s.id+"&liked="+(t?"true":"false")+"&disliked="+(e?"true":"false")).then(function(t){var e=t.data.data.result;s.liked=e.liked,s.disliked=e.disliked}).catch(function(t){t&&alert("操作失败！"),s.liked=a[0],s.disliked=a[1]})}},watch:{firstChosen:function(t,e){0!=e?this.detail.comments.sort(function(t,e){return e.date-t.date}):this.detail.comments.sort(function(t,e){return e.like-t.like})}},mounted:function(){var t=this;document.querySelector("ul#comments-list").addEventListener("scroll",function(){t.low=this.scrollTop>=10}),i.get("store_detail?id="+t.$route.params.id).then(function(e){e=e.data,t.detail=e.data,t.detail.picURLs_=t.detail.picURLs.slice(0,3),t.firstChosen=!0,t.detail.comments=[],i.get("comments_list?id="+t.$route.params.id).then(function(e){e=e.data,t.detail.comments=e.data,t.loaded=!0}).catch(function(e){e&&alert("加载失败！"),t.loaded=!0}),t.loaded=!0}).catch(function(e){e&&alert("加载失败！"),t.loaded=!0})}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(3);e.default={data:function(){return{loaded:!1,data:[],isMenuActive:!1,isSearchActive:!1,title:"",keyword:""}},watch:{$route:function(){var t=this;t.$route.path.includes("storeList")&&t.$route.path.includes("search")?(t.title="搜索: "+t.$route.params.keyword,i.get("store_list_search_data?keyword="+t.$route.params.keyword).then(function(e){e=e.data,0===e.data.length&&t.$router.replace("noStore"),t.data=e.data,t.loaded=!0}).catch(function(e){e&&alert("加载失败！"),t.loaded=!0})):(t.title=t.$route.params.type,i.get("store_list_data?type="+t.$route.params.type).then(function(e){e=e.data,t.data=e.data,console.log(t.$route.path),t.loaded=!0}).catch(function(e){e&&alert("加载失败！"),t.loaded=!0}))}},methods:{convertToFloat:function(t){return"number"==typeof t&&(t=t.toString()),3===t.length?t:t+".0"},menuActive:function(t){this.isMenuActive=!this.isMenuActive},searchActive:function(t){this.isSearchActive=!this.isSearchActive},sort1:function(){this.data.sort(function(t,e){return e.overall-t.overall}),this.isMenuActive=!this.isMenuActive},sort2:function(){this.data.sort(function(t,e){return e.score-t.score}),this.isMenuActive=!this.isMenuActive},sort3:function(){this.data.sort(function(t,e){return t.score-e.score}),this.isMenuActive=!this.isMenuActive},inputClick:function(){this.isSearchActive=!this.isSearchActive},addNewStore:function(){},search:function(){""!=this.keyword&&this.$router.push("/storeList/search/"+this.keyword)}},mounted:function(){var t=this;t.$route.path.includes("storeList")&&t.$route.path.includes("search")?(t.title="搜索: "+t.$route.params.keyword,i.get("store_list_search_data?keyword="+t.$route.params.keyword).then(function(e){e=e.data,t.data=e.data,e.data.length<1&&t.$router.replace("/storeList/search/noStore"),t.loaded=!0}).catch(function(e){e&&alert("加载失败！"),t.loaded=!0})):(t.title=t.$route.params.type,i.get("store_list_data?type="+t.$route.params.type).then(function(e){e=e.data,t.data=e.data,console.log(t.$route.path),t.loaded=!0}).catch(function(e){e&&alert("加载失败！"),t.loaded=!0}))}}}]);
//# sourceMappingURL=app.cdd1f502639abc64e265.js.map